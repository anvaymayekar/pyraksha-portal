{% extends "base.html" %} {% block title %}SOS History{% endblock %} {% block
navbar %}
<nav class="navbar">
    <div class="container navbar-content">
        <a href="{{ url_for('user.dashboard') }}" class="navbar-brand"
            >PyRaksha</a
        >
        <ul class="navbar-nav">
            <li><a href="{{ url_for('user.dashboard') }}">Dashboard</a></li>
            <li>
                <a href="{{ url_for('user.sos_history') }}" class="active"
                    >SOS History</a
                >
            </li>
            <li><a href="{{ url_for('auth.logout') }}">Logout</a></li>
        </ul>
    </div>
</nav>
{% endblock %} {% block content %}
<div class="container" style="padding-top: var(--spacing-xl)">
    <h1 style="margin-bottom: var(--spacing-xl)">SOS History</h1>
    {% for sos in sos_events %}
    <div class="card" style="margin-bottom: var(--spacing-md)">
        <div
            style="
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: var(--spacing-sm);
            "
        >
            <span class="badge badge-{{ sos.status }}"
                >{{ sos.status.upper() }}</span
            >
            <span style="color: var(--text-disabled)"
                >{{ sos.start_time.strftime('%b %d, %Y %I:%M %p') }}</span
            >
        </div>
        <p style="color: var(--text-secondary)">
            Duration: {{ '%d:%02d:%02d' % (sos.get_duration_seconds() // 3600,
            (sos.get_duration_seconds() % 3600) // 60,
            sos.get_duration_seconds() % 60) }}
        </p>
        {% if sos.get_latest_location() %}
        <p style="color: var(--text-secondary); font-size: var(--font-sm)">
            Last Location: {{ '%.6f, %.6f' %
            (sos.get_latest_location().latitude,
            sos.get_latest_location().longitude) }}
        </p>
        {% endif %}
    </div>
    {% else %}
    <div class="card"><p>No SOS events found.</p></div>
    {% endfor %}
</div>
{% endblock %}
